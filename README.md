# Claude Setup 🚀

Claude Code を**Claude Code 自身に設定してもらう**ための初心者向けガイドです。

## ✨ 特徴

- 📝 **設定ファイルじゃなくて指示書** - 難しいJSON を書く必要なし
- 🤖 **Claude Code が自分で設定** - 指示書を渡すだけで完了
- 🎯 **2つから選べる** - 自由に使える基本版と、セキュア版
- 💡 **初心者向け** - 使い方のコツも全部教えます

## 📋 前提条件

このセットアップを始める前に、以下を確認してください：

✅ **Claude Code がインストール済み**
   - [公式サイト](https://code.claude.com) からインストール

✅ **Claude Code の認証が完了済み**
   - `claude` コマンドでログイン済み

✅ **Git がインストール済み**
   - リポジトリをクローンするため

---

## 🤔 どちらを使う？

2つの設定から選んでください：

### setup.md - 基本版 🟢

**こんな人におすすめ:**
- 個人的な開発やプロジェクト
- Claude Code を自由に使いたい
- 初めて Claude Code を使う

**特徴:**
- 最小限の制限
- Claude Code の力を最大限発揮
- `.git` フォルダだけ保護

### setup-secure.md - セキュア版 🔒

**こんな人におすすめ:**
- 会社の仕事で使う
- APIキーやパスワードを扱う
- セキュリティを特に気にする

**特徴:**
- `.env` ファイルを保護
- 危険なコマンドをブロック
- 会話ログを2週間で自動削除

**迷ったら？** → まずは基本版から始めましょう！

---

## 🎯 使い方

### ステップ1: リポジトリをクローン

```bash
git clone https://github.com/infoHiroki/claude-setup.git
cd claude-setup
```

### ステップ2: Claude Code に指示書を渡す

Claude Code を起動して、以下のメッセージを送信：

**基本版の場合:**
```
setup.md の内容を読んで、指示に従って設定を適用してください
```

**セキュア版の場合:**
```
setup-secure.md の内容を読んで、指示に従って設定を適用してください
```

### ステップ3: 完了！ 🎉

Claude Code が自動的に設定を適用します。「設定を完了しました」と表示されたら完了です。

---

## 👶 初めて Claude Code を使う人へ

### Claude Code って何ができるの？

Claude Code は**AIペアプログラマー**です。こんなことができます：

- コードを書いてもらう
- バグを直してもらう
- コードの説明をしてもらう
- テストを書いてもらう
- リファクタリングしてもらう

### うまく使うコツ

#### ✅ やること

**具体的に頼む:**
```
❌ 「バグを直して」
✅ 「ログイン画面で、間違ったパスワードを入れたときに白い画面になるバグを直して」
```

**コンテキストを説明する:**
```
❌ 「この関数を直して」
✅ 「このAPI呼び出し関数は、タイムアウトしたときにエラーハンドリングができていません。
    リトライ処理を3回まで追加して、それでもダメなら適切なエラーメッセージを表示してください」
```

**段階的に進める:**
```
1. 「このコードベースの構造を説明して」（Explore）
2. 「ログイン機能を追加する計画を立てて」（Plan）
3. 「その計画を実行して」（実装）
```

#### ❌ やらないこと

- 「適当に直して」みたいな曖昧な指示
- いきなり実装から始める
- コンテキストなしで質問する

---

## 💪 便利な使い方

### `/clear` コマンド - 超重要！⭐

**何をするコマンド？**
会話の履歴をリセットして、新しい気持ちで始められます。

**いつ使う？**
- 新しいタスクを始めるとき
- Claude Code が混乱してきたとき
- 関係ない過去の会話が多くなったとき

**なぜ重要？**
- トークン（お金）を節約できる
- Claude Code の回答が速くなる
- 変な動作をしなくなる

```
新しいタスクを始める前に...
👉 /clear
```

### 📊 3つのモードについて

Claude Code には**3つのモード**があります。Shift+Tab で切り替えられます。

**切り替え方:**
1. **Shift+Tab** を押す
2. **画面を見てモード名を確認**（表示が変わる）
3. 希望のモードになるまで繰り返す

**3つのモード:**

#### 🟡 通常モード（デフォルト）
- 何かする前に毎回確認してくれる
- 「このファイルを編集していいですか？」と聞かれる
- **初心者におすすめ**

#### 🔵 Plan モード（読み取り専用）
- ファイルを読むだけ、変更しない
- 計画を立ててから実行できる
- **大きな変更の前におすすめ**

#### 🟢 Auto-accept モード（自動承認）
- 確認なしでどんどん実行
- 待ち時間がない
- **慣れてきたら使う（上級者向け）**

### 📋 Plan モードの使い方

**いつ使う？**
- 大きな機能を追加する前
- コードベースを理解したいとき
- 安全に計画を立てたいとき

**何ができる？**
- ファイルを読んで調査（変更はしない）
- 実装計画を立ててくれる
- Explore 機能を自動で使ってコード調査

**使い方:**

1. **Plan モードに切り替え**
   - Shift+Tab を押して画面を確認
   - 「Plan」と表示されるまで切り替え

2. **やりたいことを伝える**
   ```
   ユーザー認証機能を追加したい
   ```

3. **Claude が調査＋計画を提示**
   - 自動的にコードを調査
   - どう実装するか計画を提示

4. **計画を確認して実行**
   - OK なら実行を指示
   - 修正が必要なら相談

**💡 Tip:**
Plan モードでは、Claude が自動的に「Explore サブエージェント」を使ってコードを調査します。あなたが特別に操作する必要はありません。

---

## 😱 よくある失敗と対策

### 失敗1: コンテキスト不足で変な回答が返ってくる

**症状:**
```
あなた: 「バグを直して」
Claude: 「どのバグですか？どのファイルですか？」
```

**対策:**
必要な情報を全部伝えましょう：
- 何が起きているか
- 何を期待しているか
- どのファイル・関数か
- どう再現するか

### 失敗2: 許可待ちで放置してしまう

**症状:**
Claude Code が「このファイルを編集していいですか？」と聞いているのに気づかず、5分経ってしまった...

**対策:**
- 作業中は画面を見ておく
- 大量の変更がある場合は、最初に「全部OKしていいよ」と伝える
- または Auto-accept mode を使う（上級者向け）

### 失敗3: `/clear` を使わずにトークンを無駄にする

**症状:**
- Claude Code の返答が遅くなる
- 昔の話を持ち出してくる
- 料金が高くなる

**対策:**
**新しいタスクの前には必ず `/clear`！**

これを習慣にするだけで、快適度が全然違います。

### 失敗4: いきなり実装から始める

**症状:**
- 途中で方針が変わる
- 大きく書き直すことになる
- 期待と違うものができる

**対策:**
Plan モードを使って、まず計画を立てましょう：

1. **Shift+Tab** で Plan モードに切り替え
2. 「この機能を追加したい」と伝える
3. 計画を確認してから実装

---

## 🎨 カスタマイズ方法

設定をカスタマイズしたい場合は、以下の方法があります：

### 方法1: Claude Code に直接依頼（おすすめ）

最も簡単な方法です。Claude Code に以下のように依頼してください：

```
settings.json に Python の black フォーマッターを自動実行する hook を追加してください
```

Claude Code が適切に設定を追加してくれます。

### 方法2: 設定ファイルを直接編集

`~/.claude/settings.json`（Windows の場合は `%USERPROFILE%\.claude\settings.json`）を直接編集することもできます。

詳しくは [公式ドキュメント](https://code.claude.com/docs) を参照してください。

---

## 📁 プロジェクト用のルール設定

各プロジェクトで独自のルールを設定したい場合は、`templates/CLAUDE.md.example` を参考にしてください。

プロジェクトのルートディレクトリに `CLAUDE.md` ファイルを作成すると、Claude Code が自動的にそのルールを読み込みます。

**例:**
```markdown
# CLAUDE.md

## このプロジェクトについて
このプロジェクトは TypeScript + React で作られています。

## ルール
- コミットメッセージは日本語で書く
- テストは必ず書く
- コメントは英語で書く
```

---

## 🔧 トラブルシューティング

### 問題1: 設定が反映されない

**解決方法:**
Claude Code を再起動してください：

```bash
# 現在のセッションを終了（Ctrl+C または exit コマンド）
exit

# 再度起動
claude
```

### 問題2: 設定ファイルの場所が分からない

**確認方法:**

**macOS/Linux:**
```bash
cat ~/.claude/settings.json
```

**Windows:**
```powershell
type %USERPROFILE%\.claude\settings.json
```

または Claude Code に聞いてください：
```
私の settings.json ファイルの場所を教えて
```

### 問題3: 設定をやり直したい

**手順:**

1. 設定ファイルをバックアップ
2. 設定ファイルを削除
3. このセットアップを再度実行

**macOS/Linux:**
```bash
mv ~/.claude/settings.json ~/.claude/settings.json.backup
```

**Windows:**
```powershell
move %USERPROFILE%\.claude\settings.json %USERPROFILE%\.claude\settings.json.backup
```

### 問題4: Claude Code が変な動作をする

**対策:**
1. まず `/clear` を試す
2. それでもダメなら Claude Code を再起動
3. まだダメなら設定ファイルを確認

**最終手段:**
```
私の settings.json に問題がないか確認して、あれば修正してください
```

---

## 📚 もっと詳しく知りたい

### 公式ドキュメント
- [Claude Code 公式ドキュメント](https://code.claude.com/docs) - 全機能の説明
- [設定リファレンス](https://code.claude.com/docs/en/settings) - 設定の詳細
- [Hooks ガイド](https://code.claude.com/docs/en/hooks-guide) - 高度なカスタマイズ

### コミュニティ
- [Claude Code Reddit](https://www.reddit.com/r/ClaudeCode/) - 質問や情報交換
- [GitHub Discussions](https://github.com/anthropics/claude-code/discussions) - 公式フォーラム

### Tips記事
- [Claude Code Best Practices](https://www.anthropic.com/engineering/claude-code-best-practices) - 公式のベストプラクティス

---

## 🤝 コントリビューション

改善案や追加したい設定があれば、Issue や Pull Request をお待ちしています！

---

## 📄 ライセンス

MIT License

---

## ✍️ 作成者

[@infoHiroki](https://github.com/infoHiroki)

---

## 🎉 最後に

Claude Code を使いこなして、開発を楽しんでください！

**困ったときは:**
1. まず `/clear` してみる
2. Plan mode を使ってみる
3. このREADMEを読み返す
4. それでもダメなら Issue を立てる

Happy Coding! 🚀
